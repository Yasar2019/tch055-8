INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (1, 1, 2);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (2, 2, 4);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (3, 3, 6);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (4, 4, 8);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (5, 5, 10);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (6, 6, 12);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (7, 7, 14);
INSERT INTO FORFAIT (FORFAITID, NOMBREDEDVD, CAUTION) VALUES (8, 8, 16);

INSERT INTO MAGASIN (MAGASINID, NOMMAGASIN) VALUES (1, 'BlockB');
INSERT INTO MAGASIN (MAGASINID, NOMMAGASIN) VALUES (2, 'Videotron');
INSERT INTO MAGASIN (MAGASINID, NOMMAGASIN) VALUES (3, 'SuperClub');

INSERT INTO GENRE (GENREID, NOMGENRE, TYPEDEPUBLIC) VALUES (1, 'Action', 'Adulte');
INSERT INTO GENRE (GENREID, NOMGENRE, TYPEDEPUBLIC) VALUES (2, 'Fantaisie', 'Adulte');
INSERT INTO GENRE (GENREID, NOMGENRE, TYPEDEPUBLIC) VALUES (3, 'Humour', 'Adulte');

INSERT INTO REALISATEUR (REALISATEURID, NOMREALISATEUR, PRENOMREALISATEUR) VALUES (1, 'Tremblay', 'Maryse');
INSERT INTO REALISATEUR (REALISATEURID, NOMREALISATEUR, PRENOMREALISATEUR) VALUES (2, 'Olajide', 'Babatunde');
INSERT INTO REALISATEUR (REALISATEURID, NOMREALISATEUR, PRENOMREALISATEUR) VALUES (3, 'Trump', 'Donald');

INSERT INTO FILM (FILMID, TITREFILM, DUREEFILM, REALISATEURID, GENREID) VALUES (1, 'Harry Potter 1', 2, 1, 1);
INSERT INTO FILM (FILMID, TITREFILM, DUREEFILM, REALISATEURID, GENREID) VALUES (2, 'Harry Potter 2', 2, 2, 1);
INSERT INTO FILM (FILMID, TITREFILM, DUREEFILM, REALISATEURID, GENREID) VALUES (3, 'Harry Potter 3', 2, 3, 1);
INSERT INTO FILM (FILMID, TITREFILM, DUREEFILM, REALISATEURID, GENREID) VALUES (4, 'Harry Potter 4', 2, 2, 1);

INSERT INTO DVD (DVDID, DATEMISEENSERVICE, ETAT, FILMID, MAGASINID) VALUES (1, TO_DATE('2020-02-01 17:24:56', 'YYYY-MM-DD HH24:MI:SS'), 'BON', 1, 2);
INSERT INTO DVD (DVDID, DATEMISEENSERVICE, ETAT, FILMID, MAGASINID) VALUES (2, TO_DATE('2020-02-04 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'BON', 2, 2);
INSERT INTO DVD (DVDID, DATEMISEENSERVICE, ETAT, FILMID, MAGASINID) VALUES (3, TO_DATE('2020-01-21 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'BON', 3, 1);
INSERT INTO DVD (DVDID, DATEMISEENSERVICE, ETAT, FILMID, MAGASINID) VALUES (4, TO_DATE('2020-02-10 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'BON', 2, 2);
INSERT INTO DVD (DVDID, DATEMISEENSERVICE, ETAT, FILMID, MAGASINID) VALUES (5, TO_DATE('2020-02-17 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'BON', 2, 2);

INSERT INTO CLIENTELLE (CLIENTID, NOMCLIENT, PRENOMCLIENT, DATEDENAISSANCE, NOTELEPHONE, CLIENTACTIF, FORFAITID) VALUES (1, 'Dabboussi', 'Abdul-Rahman', TO_DATE('2020-10-20 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 5146859967, 'ACTIF',3);
INSERT INTO CLIENTELLE (CLIENTID, NOMCLIENT, PRENOMCLIENT, DATEDENAISSANCE, NOTELEPHONE, CLIENTACTIF, FORFAITID) VALUES (2, 'Tremblay', 'Pierre', TO_DATE('2010-02-10 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 5144839605, 'ACTIF',3);
INSERT INTO CLIENTELLE (CLIENTID, NOMCLIENT, PRENOMCLIENT, DATEDENAISSANCE, NOTELEPHONE, CLIENTACTIF, FORFAITID) VALUES (3, 'Belisle', 'Charlotte', TO_DATE('2018-03-02 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 5147492345, 'ACTIF',3);
INSERT INTO CLIENTELLE (CLIENTID, NOMCLIENT, PRENOMCLIENT, DATEDENAISSANCE, NOTELEPHONE, CLIENTACTIF, FORFAITID) VALUES (4, 'Tyson', 'Mike', TO_DATE('1993-12-20 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 5143956789, 'ACTIF',3);

INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (1, 1, 1, TO_DATE('2020-02-05 18:38:33', 'YYYY-MM-DD HH24:MI:SS'), 50);
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (2, 1, 2, TO_DATE('2020-02-11 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 45);
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (3, 2, 4, TO_DATE('2020-02-16 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 70);
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (4, 2, 3, TO_DATE('2020-01-31 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 99);
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (5, 2, 5, TO_DATE('2020-02-24 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 87);

/****************************************************************************
*TEST POUR UN EMPRUNT SI LE NOMBRE DE DVD PERMIS SELON LA CAUTION EST DEPASSÉ
*****************************************************************************/
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (1, 1, 1, TO_DATE('2020-02-03 12:38:33', 'YYYY-MM-DD HH24:MI:SS'), 50);

/**
*RESULTAT
Error report -
ORA-20001: LE CLIENT A DEPASSER LA LIMITE DE LOCATIONS AUTORISÉES!
**/

/***********************************************************************
*TEST POUR UNE DATE D'EMPRUNT POSTERIEURE A LA DATE DE MISE EN SERVICE
************************************************************************/
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (6, 2, 1, TO_DATE('2020-01-08 15:12:39', 'YYYY-MM-DD HH24:MI:SS'), 30);

/**
*RESULTAT
Error report -
ORA-20000: LA DATE DE MISE EN SERVICE EST ANTERIEURE A LA DATE D'EMPRUNT
**/

/***********************************************************************
*TEST POUR L'INSERTION D'UNE NOTE SUPERIEURE A 100 ET INFERIEURE A 0
************************************************************************/
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (1, 1, 1, TO_DATE('2020-02-21 18:38:33', 'YYYY-MM-DD HH24:MI:SS'), 110);
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, NOTE) VALUES (1, 1, 1, TO_DATE('2020-02-13 18:38:33', 'YYYY-MM-DD HH24:MI:SS'), -10);
/**
*RESULTAT
ORA-02290: check constraint (EQUIPE106.SYS_C00642478) violated
**/

/***********************************************************************
*TEST POUR UNE DATE DE RETOUR INFERIEURE A UNE DATE D'EMPRUNT
************************************************************************/
INSERT INTO EMPRUNT (NUMEMPRUNT, CLIENTID, DVDID, DATEEMPRUNT, DATERETOUR, NOTE) VALUES (6, 2, 1, TO_DATE('2020-02-09 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-02-07 15:24:45', 'YYYY-MM-DD HH24:MI:SS'), 90);


/**
*RESULTAT
Row 6: ORA-02290: check constraint (EQUIPE106.SYS_C00642479) violated
**/


COMMIT;

--********************************************************
-- SELECT : Liste des DVD non encore remis après 7 jours *
--********************************************************
SELECT Emprunt.dvdId, Emprunt.clientId, clientelle.nomclient, Clientelle.prenomClient, Emprunt.dateEmprunt, TRUNC(SYSDATE-Emprunt.dateEmprunt) AS NBR_DE_JOURS
FROM Clientelle
INNER JOIN Emprunt ON Emprunt.clientId = clientelle.clientid
Where Emprunt.dateRetour IS NULL AND TRUNC(SYSDATE-Emprunt.dateEmprunt) > 7;

--********************************************
-- RESULTAT (Nous sommes le 25 Février 2020) *
--********************************************

--     DVDID   CLIENTID NOMCLIENT                      PRENOMCLIENT                   DATEEMPR            NBR_DE_JOURS
------------ ---------- ------------------------------ ------------------------------ ------------------- ------------
--         1          1 Dabboussi                      Abdul-Rahman                   2020-02-05 18:38:33           21
--         2          1 Dabboussi                      Abdul-Rahman                   2020-02-11 00:00:00           15
--         4          2 Tremblay                       Pierre                         2020-02-16 00:00:00           10
--         3          2 Tremblay                       Pierre                         2020-01-31 00:00:00           26

